<!DOCTYPE html>
<html lang="en">
<head>
  <title>Parkway ‚Ä¢ Home</title>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css"/>

  <style>
    /* Live stats line under title */
    #liveLine {
      margin-top: 10px;
      font-size: 1rem;
      font-weight: 500;
      color: rgba(255,255,255,0.85);
      text-align: center;
    }
  </style>
</head>

<body>

<header class="topbar">
  <div class="brand"><a href="index.html">üöó Parkway</a></div>
  <nav class="navlinks">
    <a href="index.html">Home</a>
    <a href="map.html">Parking Map</a>
    <a href="booking.html">My Booking</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="about.html">How It Works</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<section class="hero full">
  <div class="hero-overlay"></div>

  <div class="hero-inner">

    <h1>Smart Parking. Simple Booking.</h1>

    <!-- ‚≠ê LIVE STATS EXACTLY ‚≠ê -->
    <p id="liveLine">0 free ‚Ä¢ 0 reserved ‚Ä¢ 0 occupied</p>

    <div class="cta-row">
      <a class="btn" href="map.html">View Parking Map</a>
      <a class="btn outline" href="booking.html">My Booking</a>
    </div>
  </div>

  <div class="scanline"></div>
</section>

<main class="container narrow">
  <section class="panel glass">
    <h2>Why Parkway?</h2>
    <p class="muted">
      Reduce search time, cut emissions, and improve convenience with live slot data, fast reservations, and IoT-driven occupancy.
    </p>
  </section>
</main>

<footer class="site-footer">
  <small>¬© <span id="year"></span> Parkway ‚Ä¢ Smart Parking System</small>
</footer>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

// ‚≠ê Your Render API (live backend)
const serverURL = "https://parkway-8fji.onrender.com/api/parking";
const liveLine = document.getElementById("liveLine");

// ‚≠ê LIVE UPDATE FUNCTION
async function updateLiveStatus() {
  try {
    const res = await fetch(serverURL);
    if (!res.ok) throw new Error("Failed");

    const slots = await res.json();
    const values = Object.values(slots).map(v => v.toLowerCase());

    const free = values.filter(v => v === "free").length;
    const reserved = values.filter(v => v === "reserved").length;
    const occupied = values.filter(v => v === "occupied").length;

    // ‚≠ê EXACTLY like screenshot ‚Äî nothing else changed
    liveLine.textContent = `${free} free ‚Ä¢ ${reserved} reserved ‚Ä¢ ${occupied} occupied`;

  } catch (err) {
    liveLine.textContent = "Live data unavailable";
  }
}

// ‚≠ê Refresh every 2 seconds (same as map & dashboard)
setInterval(updateLiveStatus, 2000);
updateLiveStatus();
</script>

</body>
</html>

